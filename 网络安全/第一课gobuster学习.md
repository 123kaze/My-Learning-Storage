

# TryHackMe学习 

## 1.第一次尝试

首先，在终端中输入以下命令，使用Gobuster（命令行安全应用程序）查找 FakeBank 网站上可能隐藏的页面。

```bash
gobuster -u http://fakebank.thm -w wordlist.txt dir
```

-u表示搜寻的网址，-w表示依靠单词列表进行迭代查询寻找隐藏的界面

找到隐藏界面登录，即可渗透

## 2.防御性概要

### 防御性安全简介

在上一个房间里，我们了解了进攻性安全性，它旨在识别和利用系统漏洞来增强安全措施。这包括利用软件错误、利用不安全的设置以及利用未强制执行的访问控制策略等策略。红队和渗透测试人员专门研究这些进攻技术。

在这个房间里，我们将研究它的对应物，防御性安全。它涉及两个主要任务：

1. 防止入侵发生
2. 在入侵发生时进行检测并正确响应

蓝队是防御性安全形势的一部分。

 

与防御性安全相关的一些任务包括：

- 用户网络安全意识：对用户进行网络安全培训有助于防范针对其系统的攻击。
- 记录和管理资产：我们需要了解我们必须充分管理和保护的系统和设备。
- 更新和修补系统：确保计算机、服务器和网络设备得到正确更新和修补，以应对任何已知的漏洞（弱点）。
- 设置预防性安全设备： 防火墙和入侵防御系统 （IPS） 是预防性安全的关键组成部分。防火墙控制哪些网络流量可以进入内部，哪些网络流量可以离开系统或网络。IPS 会阻止与当前规则和攻击签名匹配的任何网络流量。
- 设置日志记录和监控设备：适当的网络日志记录和监控对于检测恶意活动和入侵至关重要。如果我们的网络上出现新的未经授权的设备，我们应该能够检测到它。

防御性安全远不止于此。除上述内容外，我们还将介绍以下相关主题：

- 安全运营中心 （SOC）
- 威胁情报
- 数字取证和事件响应 （DFIR）
- 恶意软件分析



### 数字取证和事件响应 （DFIR）

本部分介绍数字取证和事件响应 （DFIR）， 我们将介绍：

- 数字取证
- 事件响应
- 恶意软件分析

**数字取证：**

在防御性安全方面，数字取证的重点转移到分析攻击及其肇事者的证据，以及其他领域，例如知识产权盗窃、网络间谍和拥有未经授权的内容。因此，数字取证将侧重于不同的领域，例如：

- 文件系统 ：分析系统存储的数字取证图像（低级副本）可以揭示许多信息，例如已安装的程序、创建的文件、部分覆盖的文件和已删除的文件。
- 系统内存：如果攻击者在内存中运行恶意程序，但未将其保存到磁盘，则获取系统内存的取证图像（低级副本）是分析其内容并了解攻击的最佳方式。
- 系统日志：每个客户端和服务器计算机都维护着不同的日志文件，说明发生了什么。日志文件提供了有关系统上所发生情况的大量信息。即使攻击者试图清除他们的痕迹，一些痕迹也会保留下来。
- 网络日志：遍历网络的网络数据包的日志将有助于回答有关是否发生攻击及其后果的更多问题。

**事件响应：**

事件响应 指定了处理此类情况应遵循的方法。目的是在尽可能短的时间内减少损害和恢复。理想情况下，您将制定一个为事件响应做好准备的计划。

事件响应过程的四个主要阶段是：

1. 准备：这需要一支经过培训并准备好处理事件的团队。理想情况下，采取各种措施来从一开始就防止事件发生。
2. 检测和分析： 团队拥有检测任何事件所需的资源;此外，必须进一步分析检测到的任何事件以了解其严重性。
3. 遏制、根除和恢复：一旦检测到事件，就必须阻止它影响其他系统，消除它并恢复受影响的系统。例如，当我们注意到某个系统感染了计算机病毒时，我们希望阻止（遏制）病毒传播到其他系统，清理（根除）病毒，并确保系统正确恢复。
4. 事件后活动：成功恢复后，将生成报告，并分享经验教训，以防止将来发生类似的事件。

![Incidence Response Flowchart](D:\Typora\保存文档\网络安全\assets\b162600f5990f249d921aa0e8b7822f7.png)

**恶意软件分析：**

恶意软件代表恶意软件。 *软件*是指可以保存在磁盘上或通过网络发送的程序、文档和文件。恶意软件包括多种类型，例如：

- 病毒是将自身附加到程序上的一段代码（程序的一部分）。它旨在从一台计算机传播到另一台计算机，其工作原理是在感染计算机后更改、覆盖和删除文件。结果范围从计算机变慢到无法使用。
- 特洛伊木马是一种程序，它显示一个理想的功能，但在下面隐藏了一个恶意功能。例如，受害者可能会从可疑网站下载视频播放器，从而使攻击者能够完全控制其系统。
- 勒索软件是一种加密用户文件的恶意程序。加密会使文件在不知道加密密码的情况下无法读取。如果用户愿意支付 “赎金”，攻击者会向用户提供加密密码。

恶意软件分析旨在通过各种方式了解此类恶意程序：

1. 静态分析的工作原理是检查恶意程序而不运行它。这通常需要扎实的汇编语言（处理器的指令集，即计算机的基本指令）的知识。
2. 动态分析的工作原理是在受控环境中运行恶意软件并监控其活动。它允许您观察恶意软件在运行时的行为方式。

 *Security Information and Event Management* (SIEM)   安全信息事件管理



### 学习路径

TryHackMe 的学习路径将为您提供基本的技术知识和实践经验，这对于成为一名成功的安全分析师至关重要。

- [安检前](https://tryhackme.com/path/outline/presecurity/)
- [网络安全 101](https://tryhackme.com/path/outline/cybersecurity101)
- [SOC （有机碳 ）1 级](https://tryhackme.com/path/outline/soclevel1)

### 相关职业指南

- [成为网络安全分析师](https://tryhackme.com/r/careers/cyber-security-analyst)
- [如何成为 1 级 SOC 分析师](https://tryhackme.com/r/resources/blog/become-level-1-soc-analyst)
- [SOC 分析师的一天](https://tryhackme.com/r/resources/blog/interview-with-soc-analyst)
- [终极 SOC L1 分析师访谈指南](https://tryhackme.com/r/resources/blog/soc-analyst-interview-guide)
- [从学生到 SOC 分析师：Hayden 的成功案例](https://tryhackme.com/r/resources/blog/haydens-success-story)



### 学习路径

TryHackMe 的学习路径将为您提供基本的技术知识和实践经验，这对于成为一名成功的安全工程师至关重要。

- [SOC （有机碳 ）1 级](https://tryhackme.com/path/outline/soclevel1)
- [JR 触探测试仪](https://tryhackme.com/path/outline/jrpenetrationtester)
- [冒犯性渗透测试](https://tryhackme.com/path/outline/pentesting)

### 相关职业指南

- [成为安全工程师](https://tryhackme.com/r/careers/security-engineer)
- [如何成为安全工程师](https://tryhackme.com/r/resources/blog/become-security-engineer)
- [安全工程师的一天](https://tryhackme.com/r/resources/blog/interview-with-security-engineer)
- [准备安全工程面试](https://tryhackme.com/r/resources/blog/security-engineer-interview-guide)
- [成为一名安全工程师：Richárd 的成功案例](https://tryhackme.com/r/resources/blog/richard-success-story)

### 学习路径

TryHackMe 的学习路径将为您提供基本的技术知识和实践经验，这对于成为一名成功的渗透测试人员至关重要。

- [JR 触探测试仪](https://tryhackme.com/path/outline/jrpenetrationtester)
- [冒犯性渗透测试](https://tryhackme.com/path/outline/pentesting)

### 相关职业指南

- [成为渗透测试人员](https://tryhackme.com/r/careers/penetration-tester)
- [如何成为渗透测试员](https://tryhackme.com/r/resources/blog/how-to-become-a-penetration-tester)
- [准备初级渗透测试员面试](https://tryhackme.com/r/resources/blog/jr-pentester-interview-guide)
- [从 IT 支持到渗透测试员：Tom 的成功案例](https://tryhackme.com/r/resources/blog/tom-success-story)

现在我们可以通过改名契约来更改我们的名字，但是我们不能更改我们的指纹。每个人都有一组单独的指纹，这意味着即使他们改变了名字，背后仍然有一个身份。设备具有相同的功能：两种识别方式，一种是可渗透的。这些是：

- 一个 IP 地址
- 媒体访问控制 （MAC） 地址 -- 将其视为类似于序列号。

**MAC 地址
**

网络上的设备都将具有物理网络接口，该接口是设备主板上的微芯片板。此网络接口在制造它的工厂被分配了一个唯一的地址，称为 **MAC** （**M**edia **A**ccess **C**ontrol） 地址。MAC 地址是一个 **12 个字符的**十六进制数字（ *计算中用于表示数字的 16 进制编号系统* ），分为两部分，并用冒号分隔。这些冒号被视为分隔符。例如，*a4：c3：f0：85：ac：2d*。前 6 个字符表示制作网络接口的公司，后 6 个字符是唯一的数字.

![img](D:\Typora\保存文档\网络安全\assets\394caee97fb1b9f7b5a5f7a7ea0a9f71.png)

但是，MAC 地址的一个有趣之处在于，它们可以在称为欺骗的过程中被伪造或“欺骗”。当联网设备使用其 MAC 地址假装身份为另一个设备时，就会发生这种欺骗。发生这种情况时，它通常会破坏实施不佳的安全设计，这些设计假设在网络上通信的设备是可信的。以以下场景为例： 防火墙配置为允许与管理员的 MAC 地址之间的任何通信。如果设备要伪装或“欺骗”此 MAC 地址， 防火墙现在会认为它正在接收来自管理员的通信，而实际上并非如此。

## ping

Ping 是我们可用的最基本的网络工具之一。Ping 使用 **ICMP** （**I**nternet **C**ontrol **M**essage **P**rotocol） 数据包来确定设备之间连接的性能，例如，连接是否存在或可靠。

执行简单 ping 的语法是 `ping IP address or website URL` . ping -c ip也行

## Linux学习 PART1

Let's get started with two of the first commands which I have broken down in the table below:

| Command | Description                                      |
| ------- | ------------------------------------------------ |
| echo    | Output any text that we provide                  |
| whoami  | Find out what user we're currently logged in as! |

```shell-session
tryhackme@linux1:~$ echo Hello
Hello
tryhackme@linux1:~$ echo "Hello Friend!"
Hello Friend!
```

如上面的终端所示，如果我们想 “echo” 单个单词，我们不需要使用双引号，例如 `echo Hello`。但是，如果存在一个或多个空格，则字符串应括在双引号中，例如 `echo “Hello Friend！”。`

`whoami` 可用于查找我们登录时使用的用户名。

### 与文件系统交互


正如我之前所说，能够在不依赖桌面环境的情况下导航您登录的计算机非常重要。毕竟，如果我们哪儿都去不了，登录又有什么意义呢？

| Command | Full Name                               |
| ------- | --------------------------------------- |
| ls      | listing列出清单                         |
| cd      | change directory改变当前位置            |
| cat     | concatenate建立连接，输出文件内容       |
| pwd     | print working directory输出工作地点位置 |



#### 列出当前目录中的文件 （ls）

 

在我们做任何事情（例如找出任何文件或文件夹的内容）之前，我们首先需要知道存在什么。这可以使用 “ls” 命令（列表的缩写）来完成

####  输出文件的内容 （cat）

虽然了解文件的存在很好，但除非我们能够查看文件的内容，否则它并不是那么有用。

我们将继续讨论一些可用的工具，这些工具允许我们在以后的房间里将文件从一台机器传输到另一台机器。但现在，我们将讨论使用名为 “**cat”** 的命令简单地查看文本文件的内容。

“**cat**”是连接词的缩写，是我们输出文件内容（不仅仅是文本文件）的绝佳方式。

在下面的屏幕截图中，您可以看到我如何结合使用“ls”来列出名为“Documents”的目录中的文件：

```
tryhackme@linux1:~/Documents$ ls
todo.txt
tryhackme@linux1:~/Documents$ cat todo.txt
Here's something important for me to do later!
```

*专业提示：您可以使用 cat 输出目录中的文件内容，而无需使用 cat 和目录名称导航到该文件。即* `cat /home/ubuntu/Documents/todo.txt`

#### find

 展示使用此类系统的效率的一种绝妙方法是使用一组命令在整个系统中快速搜索用户有权访问的文件。无需始终使用 cd 和 ls 来找出什么在哪里。相反，我们可以使用 find 等 命令来为我们自动化这样的事情！

让我们从简单开始，假设我们已经知道我们要查找的文件的名称 — 但记不清它的确切位置！在本例中，我们正在寻找 “passwords.txt”

如果我们记得文件名，我们可以简单地使用 find -name passwords.txt 命令将查找当前目录中的每个文件夹以查找该特定文件，如下所示：

```
tryhackme@linux1:~$ find -name passwords.txt
./folder1/passwords.txt
tryhackme@linux1:~$
```

但是，假设我们不知道文件名，或者想要搜索具有 “.txt” 等扩展名的每个文件。查找让我们也这样做！

我们可以简单地使用所谓的通配符 （*） 来搜索末尾有 .txt 的任何内容。在我们的例子中，我们希望找到当前目录中的所有 .txt 文件。我们将构造一个命令，例如 find -name *.txt 。其中 “Find” 能够找到每个 .txt 文件，然后为我们提供了每个文件的位置：

```
tryhackme@linux1:~$ find -name *.txt
./folder1/passwords.txt
./Documents/todo.txt
tryhackme@linux1:~$
```

**他只能找当前cd区域里面的，不能找全局的**

#### 使用 Grep

另一个值得学习的出色实用程序是 grep 的使用。grep 命令允许我们在文件内容中搜索我们正在寻找的特定值。

```
ryhackme@linux1:~$ wc -l access.log  //wc -l xxx.log  显示有多少个条目
244 access.log
tryhackme@linux1:~$
```

我们可以使用 `grep `搜索此文件的全部内容，以查找我们正在搜索的值的任何条目。以 Web 服务器的访问日志为例，我们想要查看 IP 地址 “81.143.211.90” 访问过的所有内容（请注意，这是虚构的）

```
tryhackme@linux1:~$ grep "81.143.211.90" access.log
81.143.211.90 - - [25/Mar/2021:11:17 + 0000] "GET / HTTP/1.1" 200 417 "-" "Mozilla/5.0 (Linux; Android 7.0; Moto G(4))"
tryhackme@linux1:~$
```

命令 `grep "搜寻的东西" 搜寻的文档 `

## shell运算符

Linux 运算符是增强 Linux 使用知识的绝佳方式。有几个重要的运算符值得注意。我们将介绍基础知识，并将它们相应地分解为小块。

在概述中，我将展示以下运算符：

| 符号 / 运算符 | 描述                                                         |
| ------------- | ------------------------------------------------------------ |
| &             | 此运算符允许您在终端的后台运行命令。                         |
| &&            | 此运算符允许您将多个命令组合到终端的一行中。                 |
| >             | 这个运算符是一个重定向器 - 这意味着我们可以从命令中获取输出（例如使用 cat 输出文件）并将其定向到其他地方。 |
| >>            | 此运算符执行与 `>` 运算符相同的功能，但附加输出而不是替换（意味着不会覆盖任何内容）。 |



### 运算符 “&”

此运算符允许我们在后台执行命令。例如，假设我们想要复制一个大文件。这显然需要相当长的时间，并且在文件成功复制之前，我们无法执行任何其他作。

“&” shell 运算符允许我们执行命令并使其在后台运行（例如此文件副本），从而允许我们执行其他作！

### 运算符“&&”

这个 shell 运算符在它的伙伴 “&” 的熟悉程度上有点误导。与“&”运算符不同，我们可以使用“&&”来列出要运行的命令，例如 command1 && command2。但是，值得注意的是，command2 仅在 command1 成功时运行。**也就是有个先后顺序**

### 作员 “>”

此运算符称为 output redirector。这实质上意味着我们从运行的命令中获取输出，并将该输出发送到其他地方。

一个很好的例子是重定向我们在任务 4 中学到的 `echo` 命令的输出。当然，运行 `echo howdy` 之类的作会将 “howdy” 返回给我们的终端 — 这并不是特别有用。相反，我们可以做的是将 “howdy” 重定向到新文件之类的内容！

假设我们想创建一个名为 “welcome” 的文件，其中包含消息 “hey”。我们可以在希望创建内容为 “hey” 的文件的地方运行 `echo hey > welcome`，如下所示：

```
tryhackme@linux1:~$ echo hey > welcome
tryhackme@linux1:~$ cat welcome
hey
```

*注意：如果文件 “welcome” 已经存在，则内容将被覆盖！*

### 作员 “>>”

此运算符也是一个输出重定向器，就像我们讨论的上一个运算符 （`>`） 一样。但是，此运算符的不同之处在于，它不是覆盖文件中的任何内容，而是仅将输出放在末尾。 输出会变成 hey hello

### PART1总结

为了快速回顾一下，我们介绍了以下内容：

- 了解为什么 Linux 在今天如此普遍
- 与您的第一台 Linux 计算机交互！
- 已运行一些最基本的命令
- 介绍了如何在文件系统中导航以及我们如何使用像 find 和 grep 这样的命令来使查找数据更加高效！
- 通过了解一些重要的 shell 运算符来增强您的命令。

## PART2 目标

在第 2 部分中，我们将放弃浏览器内功能，并帮助您开始学习能够登录和控制远程机器终端的基本技能。不仅如此，房间还将为您提供：

- **通过向您介绍使用标志和参数来释放前几个命令的潜力**
- **提高您对文件系统的了解，以执行一些更有用的命令，例如复制和移动文件**
- **了解如何管理对文件和文件夹的访问，以及我们如何确定我们的访问权限。**

- **运行您的前几个脚本和可执行文件！**

### 什么是 SSH，它是如何运作的？

Secure Shell 或 SSH 只是设备之间以加密形式存在的协议。使用加密技术，我们以人类可读格式发送的任何输入都经过加密，以便在网络上传输一旦到达远程计算机，它就会被取消加密，如下图所示。![](D:\Typora\保存文档\网络安全\assets\154f110d35efe47d493df29cdb773109-1751524706778-3.svg)



- SSH 允许我们在另一台设备上远程执行命令。
- 在设备之间发送的任何数据在通过 Internet 等网络发送时都会被加密

**使用 SSH 登录到 Linux 计算机**

使用 SSH 的语法非常简单。我们只需要提供两件事：

1. 远程计算机的 IP 地址
2. 将凭据更正为有效帐户，以便在远程计算机上登录

例如： `ssh tryhackme@10.10.100.52 `.将 IP 地址替换为 Linux 目标计算机的 IP 地址。执行后，我们将被要求信任主机，然后为 “tryhackme” 帐户提供密码，该密码也是 “tryhackme”。

### flag 和 switch

大多数命令都允许提供参数。这些参数由连字符和称为 flags 或 switches 的特定关键字标识。

我们稍后将讨论如何识别哪些命令允许提供参数，并了解这些命令的确切作用。

**使用命令时，除非另有说明，否则它将执行其默认行为。例如，`ls` 列出工作目录的内容。但是，不会显示隐藏的文件。我们可以使用 flags 和 switch 来扩展命令的行为。**

使用我们的 `ls` 示例，`ls` 告诉我们只有一个名为 “folder1” 的文件夹，如下面的屏幕截图中突出显示的那样。 请注意，下面屏幕截图中的内容只是示例。

**但是，在使用 `-a` 参数（-`-all` 的缩写）后 ，我们现在突然有一个包含更多文件和文件夹的输出，例如“.hiddenfolder”。带有 “.” 的文件和文件夹是隐藏文件。**  //输入-a可以查到隐藏文件

接受这些选项的命令也将具有 `--help` 选项。此选项将列出命令接受的可能选项，并提供如何使用它的简要说明和示例。输入--help得到帮助

#### 菜单页面

手册页是系统命令和应用程序的重要信息来源 ，在 Linux 计算机上都可用，可以在计算机本身上访问，也可以[在线](https://linux.die.net/man/)访问。

要访问此文档，我们可以使用 `man `命令，然后提供我们想要阅读其文档的命令。使用我们的 ls 示例，我们将使用 `man ls` 来查看 `ls` 的手册页，如下所示：

### 文件交互系统2

我们介绍了在 Linux 机器上与文件系统交互时的一些最基本的命令。例如，我们介绍了如何使用 `ls` 列出和查找文件夹 的内容，以及 如何使用 `cd` `查找 ` 和导航文件系统。 

在这个任务中，我们将学习更多用于与文件系统交互的命令，以允许我们：

- 创建文件和文件夹
- 移动文件和文件夹
- 删除文件和文件夹

更具体地说，以下命令：

| 命令  | 全名           | 目的             |
| ----- | -------------- | ---------------- |
| touch | touch          | 创建文件         |
| mkdir | make directory | 创建文件夹       |
| cp    | copy           | 复制文件或文件夹 |
| mv    | move           | 移动文件或文件夹 |
| rm    | remove删除     | 移除文件或文件夹 |
| file  | file           | 确定文件类型     |

*专业提示：与使用 cat 类似，我们可以为所有这些命令提供完整的文件路径，即 directory1/directory2/note*

#### **创建文件和文件夹 （touch， mkdir）**

在 Linux 上创建文件和文件夹是一个简单的过程。首先，我们将介绍如何创建文件。touch 命令只接受一个参数 —— 我们想要为我们创建的文件指定的名称。例如，我们可以使用 `touch note` 创建文件 “note”。值得注意的是，触摸只会创建一个空白文件。 您需要使用 echo 等命令或 nano 等文本编辑器将内容添加到空白文件中。

#### **删除文件和文件夹 （rm）**

`rm` 在我们目前介绍的命令中非常出色。您可以简单地使用 `rm` 删除文件。但是，您需要在要删除的目录名称旁边提供 `-R` 开关。

```
tryhackme@linux2:~$ rm -R mydirectory //后面跟个-R
tryhackme@linux2:~$ ls           
folder1
```





























